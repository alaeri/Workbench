<!DOCTYPE html>
<html>
  <head>
<!--    <meta name="viewport" content="width=1040">-->
<!--    <script type="text/javascript" src="file:///android_asset/d3.v5.min.js" ></script>-->
    <script src="https://d3js.org/d3-array.v2.min.js"></script>
    <script src="https://d3js.org/d3-array.v2.min.js"></script>
    <script src="https://d3js.org/d3-color.v1.min.js"></script>
    <script src="https://d3js.org/d3-format.v1.min.js"></script>
    <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
    <script src="https://d3js.org/d3-time.v1.min.js"></script>
    <script src="https://d3js.org/d3-time-format.v2.min.js"></script>
    <script src="https://d3js.org/d3-scale.v3.min.js"></script>
    <script src="https://d3js.org/d3-color.v1.min.js"></script>
    <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <script src="https://d3js.org/d3-selection.v1.min.js"></script>
    <script src="https://d3js.org/d3-color.v2.min.js"></script>
    <script src="https://d3js.org/d3-dispatch.v2.min.js"></script>
    <script src="https://d3js.org/d3-ease.v2.min.js"></script>
    <script src="https://d3js.org/d3-interpolate.v2.min.js"></script>
    <script src="https://d3js.org/d3-selection.v2.min.js"></script>
    <script src="https://d3js.org/d3-timer.v2.min.js"></script>
    <script src="https://d3js.org/d3-transition.v2.min.js"></script>
    <script src="https://d3js.org/d3-drag.v2.min.js"></script>
    <script src="https://d3js.org/d3-zoom.v2.min.js"></script>
    <script type="text/javascript" src="/loadPieChart.js" ></script>
    <style>
    body: {
      background-color: red;
    }
  </style>
  </head>
  <body style="height: 100vh;">

<!--    <svg id="piechart" width="100%" height="100%"></svg>-->
<!--svg`-->
<button onclick="fetch('clear')">Clear</button>
<svg width="100%" height="100%">
  <style>
    text {
      font-family: sans-serif;
      font-size: 10px;
    }
    .node {
      stroke-linecap: round;
    }
    .link {
      fill: none;
    }
  </style>

  </svg>
<script>
const exampleSocket = new WebSocket("ws://localhost:8080/ws/");
exampleSocket.onmessage = (e)=>{
    console.log("exampleSocketMessage" + e);
    const json = e.data
    const data = JSON.parse(json)
    loadPieChart(data);
}
fetch("graph").then(function(response){
    response.json().then(function(data){
        loadPieChart(data);
    })
})
<!-- loadPieChart();-->
</script>

  </body>
</html>